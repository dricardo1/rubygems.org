<!DOCTYPE html>
<html lang="en-us">
  <head>
    <title><%= page_title %></title>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0" name="viewport">
    <meta name="google-site-verification" content="AuesbWQ9MCDMmC1lbDlw25RJzyqWOcDYpuaCjgPxEZY" />
    <link rel="apple-touch-icon" href="/touch-icon-iphone.png" />
    <link rel="apple-touch-icon" sizes="72x72" href="/touch-icon-ipad.png" />
    <link rel="apple-touch-icon" sizes="114x114" href="/touch-icon-iphone4.png" />
    <link rel="fluid-icon" href="/fluid-icon.png"/>
    <link rel="search" type="application/opensearchdescription+xml" title="<%=t :title %>" href="/opensearch.xml">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <script src="//use.typekit.net/lkc4mmu.js" type="text/javascript"></script>
    <script>
      try{Typekit.load();}catch(e){}
    </script>
    <%= stylesheet_link_tag "base", "layout", "type", "button", "error", "filter", "footer", "gem", "gems", "header", "help", "home", "icon", "modal", "nav--paginated", "nav--v", "profile", "post", "project", "search", "shared", "uptime", :cache => true %>
    <%= render "layouts/feeds" %>
    <%= csrf_meta_tag %>
    <%= yield :head %>
  </head>

  <body>
    <div class="container_12">
      <div class="prefix_1 grid_4 header">
        <h1><%= link_to t(:title), root_url, :title => "Home" %></h1>
      </div>
      <div class="grid_6 suffix_1 nav">
        <div id="nav-cap">
          <div id="nav">
            <% if signed_in? %>
                <div id="user-info">
                  <a href="<%= profile_path(current_user.display_id) %>">
                    <%= gravatar(32, "user_gravatar") %>
                    <span><%= truncate(current_user.name) %></span>
                  </a>
                </div>
                <ul id="signed_in">
                  <li id="all-gems"><%= link_to t('.header.all_gems'), rubygems_url %></li>
                  <li id="dashboard"><%= link_to t('.header.dashboard'), dashboard_url %></li>
                  <li id="sign-out"><%= link_to t('.header.sign_out'), sign_out_path, :method => :delete %></li>
                </ul>
            <% else %>
              <ul id="signed_out">
                <li id="all-gems"><%= link_to "all gems", rubygems_url %></li>

                <li id="sign-in">
                  <a href="<%= ssl_url_for :controller => 'clearance/sessions',
                                           :action     => 'new' %>"><%= t('.header.sign_in') %></a>
                </li>

                <li id="sign-up">
                  <a href="<%= ssl_url_for :controller => 'clearance/users',
                                           :action     => 'new' %>"><%= t('.header.sign_up') %></a>
                </li>
              </ul>
            <% end %>
          </div>
        </div>
        <%= form_tag search_url, :id => "main-search", :method => :get do %>
          <%= text_field_tag :query, params[:query], :placeholder => "Search gems&hellip;".html_safe, autofocus: current_page?(root_url) %>
          <%= submit_tag 'Search', :id => 'search_submit', :name => nil %>
        <% end %>
      </div>
      <div class="prefix_1 grid_10 suffix_1 main">
        <% flash.each do |name, msg| %>
          <div id="flash-border">
            <div id="flash_<%= name %>"><span><%= msg %></span></div>
          </div>
        <% end %>
        <%= render :partial => "announcements/announcement_for_all" %>
        <% if content_for?(:fold) %>
          <div class="fold">
            <%= yield :fold %>
          </div>
        <% end %>
        <div class="info clearfix">
          <div class="title">
            <% if @title %>
              <h2><%= link_to @title, @title_url %></h2>
            <% end %>
            <% if @subtitle %>
              <h3><%= @subtitle.html_safe %></h3>
            <% end %>
            <%= yield :title %>
          </div>
          <%= yield %>
        </div>
      </div>

      <footer class="footer">
        <div class="l-wrap--footer">
          <div class="l-overflow">
            <div class="nav--v l-col--r--pad">
              <a class="nav--v__link--footer" href="/status">Status</a>
              <a class="nav--v__link--footer" href="/uptime">Uptime</a>
              <a class="nav--v__link--footer" href="https://github.com/rubygems/rubygems.org" target='_blank'>Code</a>
              <a class="nav--v__link--footer" href="https://groups.google.com/forum/#!forum/rubygems-org" target='_blank'>Discuss</a>
              <a class="nav--v__link--footer" href="/stats">Stats</a>
              <a class="nav--v__link--footer" href="/blogs">Blog</a>
              <a class="nav--v__link--footer" href="/about">About</a>
              <a class="nav--v__link--footer" href="/help">Help</a>

              <li><%= link_to t('.footer.help'), t(:help_url) %></li>
              <li><%= link_to t('.footer.guides'), "http://guides.rubygems.org"  %></li>
              <li><%= link_to t('.footer.blog'), "http://blog.rubygems.org" %></li>
              <li><%= link_to t('.footer.contribute'), "http://guides.rubygems.org/contributing/"  %></li>
              <li><%= link_to t('.footer.mobile'), "http://m.rubygems.org" %></li>
              <li><%= link_to t('.footer.status'), "http://status.rubygems.org" %></li>
              <li><%= link_to t('.footer.uptime'), "http://uptime.rubygems.org" %></li>
              <li><%= link_to t('.footer.source_code'), "http://github.com/rubygems/rubygems.org" %></li>
              <li><%= link_to t('.footer.discussion_forum'), "http://groups.google.com/group/rubygems-org" %></li>
              <li><%= link_to t('.footer.statistics'), stats_url %></li>
              <li><%= link_to t('.footer.about'), page_url("about") %></li>
            </div>
            <div class="l-colspan--l colspan--l--has-border">
              <p class="footer__about">RubyGems.org is the Ruby community&rsquo;s gem hosting service. Instantly publish your gems and install them. Use the API to interact and find out more information about available gems. Become a contributor and enhance the site with your own changes.</p>
            </div>
          </div>
        </div>
        <div class="footer__sponsors-wrap">
          <div class="footer__sponsors">
            <a class="footer__sponsor" href="http://rubycentral.org/" target="_blank">
              Supported by
              <img alt="Ruby Central" class="footer__sponsor__logo" src="/logos/ruby-central.png">
            </a>
            <a class="footer__sponsor" href="https://www.bluebox.net/" target="_blank">
              Hosted by
              <img alt="Blue Box" class="footer__sponsor__logo" src="/logos/bluebox.png">
            </a>
            <a class="footer__sponsor" href="http://www.dockyard.com/" target="_blank">
              Designed by
              <img alt="DockYard" class="footer__sponsor__logo" src="/logos/dockyard.png">
            </a>
            <a class="footer__sponsor" href="https://dnsimple.com/" target="_blank">
              Resolved with
              <img alt="DNSimple" class="footer__sponsor__logo" src="/logos/dnsimple.png">
            </a>
            <a class="footer__sponsor" href="http://newrelic.com/" target="_blank">
              Optimized by
              <img alt="New Relic" class="footer__sponsor__logo" src="/logos/new-relic.png">
            </a>
            <a class="footer__sponsor" href="http://get.gaug.es/" target="_blank">
              Tracking by
              <img alt="Gauges" class="footer__sponsor__logo" src="/logos/gauges.png">
            </a>
            <a class="footer__sponsor" href="https://www.runscope.com/" target="_blank">
              Monitored by
              <img alt="Runscope" class="footer__sponsor__logo" src="/logos/runscope.png">
            </a>
          </div>
        </div>
      </footer>
    </div>

    <%= javascript_include_tag "jquery.min", "jquery.easing.1.3", "jquery.color", "jquery_ujs", "announcements", "application", :cache => true %>
    <%= yield :javascript %>

    <script type="text/javascript">
      var _gauges = _gauges || [];
      (function() {
        var t   = document.createElement('script');
        t.type  = 'text/javascript';
        t.async = true;
        t.id    = 'gauges-tracker';
        t.setAttribute('data-site-id', '4eab0ac8613f5d1583000005');
        t.src = '//secure.gaug.es/track.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(t, s);
      })();
    </script>
  </body>
</html>
